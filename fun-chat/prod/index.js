(()=>{"use strict";var e={8125:(e,t,s)=>{s.r(t)},1945:(e,t,s)=>{s.r(t)},8416:(e,t,s)=>{s.r(t)},3486:(e,t,s)=>{s.r(t)},9062:(e,t,s)=>{s.r(t)},1120:(e,t,s)=>{s.r(t)},2331:(e,t,s)=>{s.r(t)},7275:(e,t,s)=>{s.r(t)},6756:(e,t,s)=>{s.r(t)},8861:(e,t,s)=>{s.r(t)},5981:(e,t,s)=>{s.r(t)},400:(e,t,s)=>{s.r(t)},5977:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(4908)),n=a(s(8372)),i=a(s(5780)),o=a(s(5336)),l=a(s(301)),u=a(s(6700)),d=a(s(144)),c=a(s(469)),m=s(1700);t.default=class{constructor(){this.start=new r.default(m.formParams),this.wrapper=new n.default(m.wrapperParams),this.errorBlock=new i.default(m.errorParams),this.infoBlock=new o.default(m.infoParams),this.main=new l.default(m.mainParams),this.notFound=new u.default(m.notFoundParams),this.mainUsersThis=new d.default,this.router=new c.default}createPage(){document.addEventListener("click",(()=>{this.mainUsersThis.showActionMessage(!1),this.mainUsersThis.writeIdActionMessage("")})),document.body.append(this.errorBlock.errorBlock.getElement(),this.wrapper.getElement(),this.infoBlock.infoBlock.getElement(),this.start.form.getElement(),this.main.mainPage.getElement(),this.notFound.notFoundPage.getElement()),document.addEventListener("DOMContentLoaded",(()=>{this.router.navigate(null)})),window.addEventListener("popstate",(()=>{this.router.navigate(null)}))}}},4987:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(3537)),n=a(s(144)),i=a(s(4422));class o extends i.default{constructor(e){super(),this.formStartThis=new r.default,this.mainUsersThis=new n.default,this.eventListener=e}callback(e){e.preventDefault(),this.formStartThis.hiddenError(),this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit()}}t.default=o},8702:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(3537)),n=a(s(144)),i=a(s(469)),o=a(s(4422));class l extends o.default{constructor(e){super(),this.formStartThis=new r.default,this.mainUsersThis=new n.default,this.routerThis=new i.default,this.eventListener=e}callback(e){e.preventDefault(),sessionStorage.getItem("totoogg-JSFE2023Q4")?this.routerThis.navigate("main"):this.routerThis.navigate("login"),this.formStartThis.hiddenInfo(),this.mainUsersThis.checkMessage()&&this.mainUsersThis.updateMessageScrolling(),this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit()}}t.default=l},4422:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(3576));class n extends r.default{}t.default=n},5315:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(e){e.preventDefault();const t=sessionStorage.getItem("totoogg-JSFE2023Q4");if(t){const e=JSON.parse(t),s={id:String(Date.now()),type:"USER_LOGOUT",payload:{user:{login:e.login,password:e.password}}};this.sendServerData(s),this.mainUsersThis.clearUsers(),this.mainUsersThis.clearInteractionMessages(),this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit()}}}t.default=i},3315:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(e){e.preventDefault(),this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit()}}t.default=i},8918:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(e){e.preventDefault();const t=e.target.closest(".right");this.mainUsersThis.showActionMessage(!1),this.mainUsersThis.writeIdActionMessage(""),"mousedown"===this.eventListener&&2===e.button&&this.mainUsersThis.overBlockActionMessage(e.clientX,e.clientY),"contextmenu"!==this.eventListener||!t||this.mainUsersThis.getIdActionMessage()&&this.mainUsersThis.getIdActionMessage()===t.getAttribute("data-id")||(this.mainUsersThis.selectMessage(t.getAttribute("data-id")),this.mainUsersThis.showActionMessage(!0),this.mainUsersThis.writeIdActionMessage(t.getAttribute("data-id")))}}t.default=i},2187:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(){const e=this.mainUsersThis.getIdActionMessage(),t={id:String(Date.now()),type:"MSG_DELETE",payload:{message:{id:e}}};this.mainUsersThis.getIdInput()===e&&(this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit()),this.sendServerData(t)}}t.default=i},4754:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(){const e=this.mainUsersThis.getIdActionMessage();this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit(),this.mainUsersThis.addTextInInput(e)}}t.default=i},4401:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(){this.mainUsersThis.getMessageValue().trim().length>0?this.mainUsersThis.buttonSend(!0):this.mainUsersThis.buttonSend(!1)}}t.default=i},948:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(e){const t=e.target;"mouseenter"===this.eventListener&&this.mainUsersThis.toggleAttMessages(!0),"mouseleave"===this.eventListener&&this.mainUsersThis.toggleAttMessages(!1),"mousemove"===this.eventListener&&t.closest(".interaction__messages")&&this.mainUsersThis.overBlockActionMessage(e.clientX,e.clientY)}}t.default=i},7348:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(){if("true"===this.mainUsersThis.checkAttMessages()&&this.mainUsersThis.checkDividingStrip()){const e=this.mainUsersThis.getIdMessagesDelivered();this.mainUsersThis.clearStrip(),this.mainUsersThis.clearCountMessage(),e.forEach((e=>{const t={id:String(Date.now()),type:"MSG_READ",payload:{message:{id:e}}};this.sendServerData(t)}))}this.mainUsersThis.showActionMessage(!1),this.mainUsersThis.writeIdActionMessage("")}}t.default=i},3082:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(e){if(e.preventDefault(),!this.mainUsersThis.checkButtonSend())if(this.mainUsersThis.checkEdit()){const e=this.mainUsersThis.getMessageValue(),t={id:String(Date.now()),type:"MSG_SEND",payload:{message:{to:this.mainUsersThis.getUserToSend(),text:e}}};this.sendServerData(t),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.buttonSend(!1),this.readedMessage()}else this.editMessage()}readedMessage(){if(this.mainUsersThis.checkDividingStrip()){const e=this.mainUsersThis.getIdMessagesDelivered();this.mainUsersThis.clearStrip(),this.mainUsersThis.clearCountMessage(),e.forEach((e=>{const t={id:String(Date.now()),type:"MSG_READ",payload:{message:{id:e}}};this.sendServerData(t)}))}}editMessage(){const e=this.mainUsersThis.getIdInput(),t=this.mainUsersThis.getMessageValue(),s={id:String(Date.now()),type:"MSG_EDIT",payload:{message:{id:e,text:t}}};this.sendServerData(s),this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit()}}t.default=i},4701:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.mainUsersThis=new r.default,this.eventListener=e}callback(e){const t=e.target.parentElement;if(t.classList.contains("content__user")){const e=!t.children[0].classList.contains("offline"),s=t.children[1].textContent,a=t.children[1].getAttribute("data-login"),r={id:String(Date.now()),type:"MSG_FROM_USER",payload:{user:{login:a||s}}};sessionStorage.getItem("totoogg-JSFE2023Q4")&&sessionStorage.setItem("selectUserTotoogg-JSFE2023Q4",a||s),this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit(),this.mainUsersThis.selectUser(e,s,a),this.mainUsersThis.clearInputMessage(),this.sendServerData(r)}}}t.default=i},8922:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(4422)),n=a(s(4132));class i extends r.default{constructor(e){super(),this.unitThis=new n.default,this.eventListener=e}callback(){this.unitThis.checkUsers()}}t.default=i},5889:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(3537)),n=a(s(144)),i=a(s(469)),o=a(s(4422));class l extends o.default{constructor(e){super(),this.formStartThis=new r.default,this.mainUsersThis=new n.default,this.routerThis=new i.default,this.eventListener=e}callback(e){e.preventDefault(),this.routerThis.navigate("about")}}t.default=l},1132:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(3537)),n=a(s(4422));class i extends n.default{constructor(e){super(),this.formStartThis=new r.default,this.eventListener=e}callback(){this.checkName()?this.formStartThis.visibilityNameError(!0):this.formStartThis.visibilityNameError(!1),this.checkPassword()?this.formStartThis.visibilityPasswordError(!0):this.formStartThis.visibilityPasswordError(!1),!this.formStartThis.checkVisibilityError()&&this.formStartThis.getNameValue()&&this.formStartThis.getPasswordValue()?this.formStartThis.buttonLogin():this.formStartThis.buttonLogin("disable")}checkName(){const e=this.formStartThis.getNameValue().split(""),t=e.filter((e=>!"AEIOUYBCDFGHJKLMNPQRSTVWXZaeiouybcdfghjklmnpqrstvwxz1234567890".includes(e)));return e.length<=4||t.length>0}checkPassword(){const e=this.formStartThis.getPasswordValue();let t=!1,s=!1;const a=e.split(""),r=a.filter((e=>!"AEIOUYBCDFGHJKLMNPQRSTVWXZaeiouybcdfghjklmnpqrstvwxz1234567890".includes(e)));return a.forEach((e=>{Number.isNaN(Number(e))&&(t||(t=e.toUpperCase()===e),s||(s=e.toLowerCase()===e))})),a.length<=4||!s||!t||r.length>0}}t.default=i},1619:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(3537)),n=a(s(4422)),i=a(s(469));class o extends n.default{constructor(e){super(),this.formStartThis=new r.default,this.routerThis=new i.default,this.eventListener=e}callback(e){if(e.preventDefault(),!this.formStartThis.checkButton()){const e={id:String(Date.now()),type:"USER_LOGIN",payload:{user:{login:this.formStartThis.getNameValue(),password:this.formStartThis.getPasswordValue()}}};this.sendServerData(e)}}}t.default=o},4132:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(144));t.default=class{constructor(){this.mainUsers=new r.default}checkUsers(){const e=this.mainUsers.getSearchUser(),t=this.mainUsers.getUsers().filter((t=>null==t?void 0:t.includes(e)));this.mainUsers.showUsers(t)}}},647:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.events={}}on(e,t){this.events[e]=this.events[e]||[],this.events[e]&&this.events[e].push(t)}emit(e,t){this.events[e]&&this.events[e].forEach((e=>e(t)))}}},3576:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(9616)),n=a(s(3537)),i=a(s(144)),o=a(s(469)),l=a(s(4132)),u=a(s(647));class d extends u.default{constructor(){super(),this.server=new r.default,this.formStart=new n.default,this.mainUsers=new i.default,this.unit=new l.default,this.router=new o.default,this.addUnitEvent()}addUnitEvent(){this.on("ERROR",this.userShowError.bind(this)),this.on("USER_LOGIN",this.userLogin.bind(this)),this.on("USER_LOGOUT",this.userLogout.bind(this)),this.on("USER_ACTIVE",this.authenticationUsers.bind(this)),this.on("USER_INACTIVE",this.authenticationUsers.bind(this)),this.on("USER_EXTERNAL_LOGIN",this.userExternalLogin.bind(this)),this.on("USER_EXTERNAL_LOGOUT",this.userExternalLogout.bind(this)),this.on("MSG_SEND",this.messageSend.bind(this)),this.on("MSG_FROM_USER",this.messagesFromUser.bind(this)),this.on("MSG_DELIVER",this.messageDelivered.bind(this)),this.on("MSG_READ",this.messageReaded.bind(this)),this.on("MSG_DELETE",this.messageDelete.bind(this)),this.on("MSG_EDIT",this.messageEdit.bind(this)),this.on("OPEN",this.openConnect.bind(this)),this.on("CLOSE",this.closeConnect.bind(this))}sendServerData(e){this.server.connectServer(JSON.stringify(e))}openConnect(e){const t=sessionStorage.getItem("totoogg-JSFE2023Q4"),s=window.location.pathname.slice(1);if(t){const e=JSON.parse(t),s={login:e.login,password:e.password,isLogin:!1};sessionStorage.setItem("totoogg-JSFE2023Q4",JSON.stringify(s))}t&&"OPEN"===e.type&&"about"!==s&&"error"!==s?this.router.navigate("main"):this.router.navigate(s),this.formStart.showErrorConnect(!1)}closeConnect(e){"CLOSE"===e.type&&(sessionStorage.removeItem("selectUserTotoogg-JSFE2023Q4"),this.formStart.showErrorConnect(!0),this.mainUsers.clearUsers(),this.mainUsers.clearInteractionMessages(),this.mainUsers.showCancelEdit(!1),this.mainUsers.clearInputMessage(),this.mainUsers.activeButtonSendMessage(!1),this.mainUsers.clearMessageEdit())}userLogout(e){var t;(null===(t=e.payload.user)||void 0===t?void 0:t.isLogined)||(sessionStorage.removeItem("totoogg-JSFE2023Q4"),sessionStorage.removeItem("selectUserTotoogg-JSFE2023Q4"),this.router.navigate("login"))}userLogin(e){var t,s;if(null===(s=null===(t=e.payload)||void 0===t?void 0:t.user)||void 0===s?void 0:s.login){const e={id:String(Date.now()),type:"USER_INACTIVE",payload:null},t={id:String(Date.now()),type:"USER_ACTIVE",payload:null},s={login:this.formStart.getNameValue(),password:this.formStart.getPasswordValue(),isLogin:!0};sessionStorage.setItem("totoogg-JSFE2023Q4",JSON.stringify(s)),this.formStart.showMain(),this.sendServerData(t),this.sendServerData(e),this.formStart.hiddenFormStart()}}userShowError(e){this.formStart.showError(e.payload.error)}authenticationUsers(e){const{users:t}=e.payload,s=this.formStart.getNameValue(),a=sessionStorage.getItem("selectUserTotoogg-JSFE2023Q4");t.length>0&&(null==t||t.forEach((e=>{if(e.login!==s){const t={id:String(Date.now()),type:"MSG_FROM_USER",payload:{user:{login:e.login}}};if(this.sendServerData(t),a&&a===e.login){let t=a,s=null;a.length>10&&(t=`${a.slice(0,10)}...`,s=a),this.mainUsers.selectUser(e.isLogined,t,s)}this.formStart.addUser({status:e.isLogined,name:e.login,count:0})}}))),this.mainUsers.sortUsers()}userExternalLogin(e){const{user:t}=e.payload;this.mainUsers.checkUser(t.login)?this.mainUsers.updateStatusUser(t.login):this.formStart.addUser({status:t.isLogined,name:t.login,count:0}),this.mainUsers.sortUsers(),this.mainUsers.updateUserMessage(t.login,!0),this.unit.checkUsers()}userExternalLogout(e){const{user:t}=e.payload;this.mainUsers.changeUserStatusOffline(t.login),this.mainUsers.sortUsers(),this.mainUsers.updateUserMessage(t.login,!1),this.unit.checkUsers()}messageDelivered(e){const{message:t}=e.payload;this.mainUsers.updateSentMessage(t.id,t.status.isDelivered)}messageReaded(e){const{message:t}=e.payload;this.mainUsers.updateReadedMessage(t.id,t.status.isReaded)}messageSend(e){var t;const s=null===(t=e.payload)||void 0===t?void 0:t.message,a=this.getTime(s.datetime),r=this.mainUsers.getUserFromSend(),n=this.mainUsers.getUserToSend();n&&((null==s?void 0:s.from)===r&&this.mainUsers.addMessage("You",s.text,a,String(s.id),s.status),(null==s?void 0:s.from)===n&&(this.mainUsers.checkDividingStrip()||this.mainUsers.addDividingStrip(),this.mainUsers.addMessage(s.from,s.text,a,String(s.id),s.status))),this.mainUsers.updateMessageScrolling(),this.mainUsers.updateCountMessages(s.from)}messagesFromUser(e){const{messages:t}=e.payload,s=this.mainUsers.getUserFromSend(),a=this.mainUsers.getUserToSend(),r=null==t?void 0:t.find((e=>e.from!==s)),n=null==t?void 0:t.filter((e=>{var t;return!(null===(t=e.status)||void 0===t?void 0:t.isReaded)&&e.from!==s})).length;n&&this.mainUsers.updateCountMessages(r.from,n),a&&t.length>0&&t[0].to===a&&(null==t||t.forEach((e=>{var t;if(!this.mainUsers.checkIdMessages(e.id)){const a=e.status,r=this.getTime(e.datetime);e.from===s?this.mainUsers.addMessage("You",e.text,r,String(e.id),a):((null===(t=e.status)||void 0===t?void 0:t.isReaded)||this.mainUsers.checkDividingStrip()||this.mainUsers.addDividingStrip(),this.mainUsers.addMessage(e.from,e.text,r,String(e.id),a))}})),this.mainUsers.updateMessageScrolling())}messageDelete(e){var t;const{message:s}=e.payload;if(null===(t=null==s?void 0:s.status)||void 0===t?void 0:t.isDeleted){this.mainUsers.messageDelete(s.id),this.mainUsers.checkCountMessages(),this.mainUsers.clearUsers();const e={id:String(Date.now()),type:"USER_INACTIVE",payload:null},t={id:String(Date.now()),type:"USER_ACTIVE",payload:null};this.sendServerData(t),this.sendServerData(e)}}messageEdit(e){var t;const{message:s}=e.payload;(null===(t=null==s?void 0:s.status)||void 0===t?void 0:t.isEdited)&&this.mainUsers.messageEdit(s.id,s.text)}getTime(e){const t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}.${String(t.getMonth()+1).padStart(2,"0")}.${t.getFullYear()}, ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`}}t.default=d},469:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(3537)),n=a(s(144));t.default=class{constructor(){this.routes=[{path:"totoogg-JSFE2023Q4/fun-chat/prod",callback:()=>{this.startPage()}},{path:"totoogg-JSFE2023Q4/fun-chat/prod/login",callback:()=>{this.startPage()}},{path:"totoogg-JSFE2023Q4/fun-chat/prod/about",callback:()=>{this.infoPage()}},{path:"totoogg-JSFE2023Q4/fun-chat/prod/main",callback:()=>{this.mainPage()}},{path:"totoogg-JSFE2023Q4/fun-chat/prod/error",callback:()=>{this.notFoundPage()}}],this.mainUsersThis=new n.default,this.formStartThis=new r.default}navigate(e){"string"==typeof e&&this.setHistory(e);const t=window.location.pathname.slice(1);this.urlChangedHandler(t)}setHistory(e){window.history.pushState(null,"",`/${e}`)}urlChangedHandler(e){const t=this.routes.find((t=>t.path===e));if(t)t.callback();else{const e=this.routes.find((e=>"error"===e.path));e&&this.navigate(e.path)}}startPage(){sessionStorage.getItem("totoogg-JSFE2023Q4")?(this.formStartThis.hiddenFormStart(),this.navigate("main")):this.formStartThis.startPage()}mainPage(){const e=sessionStorage.getItem("totoogg-JSFE2023Q4");if(e){const t=JSON.parse(e);this.formStartThis.setNameValue(t.login),this.formStartThis.setPasswordValue(t.password),this.formStartThis.buttonLogin(),this.mainUsersThis.showCancelEdit(!1),this.mainUsersThis.clearInputMessage(),this.mainUsersThis.activeButtonSendMessage(!1),this.mainUsersThis.clearMessageEdit(),t.isLogin?this.formStartThis.showMain():(this.mainUsersThis.clearUsers(),this.mainUsersThis.clearInteractionMessages(),this.formStartThis.submitForm())}else this.navigate("login")}infoPage(){this.formStartThis.showInfo()}notFoundPage(){this.formStartThis.showNotFound()}}},9616:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(3576));let n=new WebSocket("ws://127.0.0.1:4000");function i(e){const t=new r.default,s=JSON.parse(e.data),a=s.type;t.emit(a,s)}function o(){(new r.default).emit("OPEN",{id:null,type:"OPEN",payload:null})}function l(){(new r.default).emit("CLOSE",{id:null,type:"CLOSE",payload:null}),n=new WebSocket("ws://127.0.0.1:4000"),n.onopen=o,n.onmessage=i,n.onclose=l}t.default=class{connectServer(e){1===n.readyState&&n.send(e)}},n.addEventListener("message",(e=>{i(e)})),n.addEventListener("open",(()=>{o()})),n.addEventListener("close",(()=>{l()}))},5780:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(8125),t.default=class{constructor(e){this.errorText=new r.default(n.errorTextParams),this.errorBottom=new r.default(n.errorButtonParams),this.loss=new r.default(n.errorLossParams),this.lossImg=new r.default(n.errorLossImgParams),this.lossText=new r.default(n.errorLossTextParams),this.errorBlock=new r.default(e),this.createElements()}getElement(){return this.errorBlock?this.errorBlock:null}createElements(){this.createLoss(),this.errorBlock.getElement().append(this.errorText.getElement(),this.errorBottom.getElement(),this.loss.getElement())}createLoss(){this.loss.getElement().append(this.lossImg.getElement(),this.lossText.getElement())}}},5336:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(1945),t.default=class{constructor(e){this.infoTitle=new r.default(n.infoTitleParams),this.infoText=new r.default(n.infoTextParams),this.infoLink=new r.default(n.infoLinkParams),this.infoButton=new r.default(n.infoButtonParams),this.infoBlock=new r.default(e),this.createElements()}getElement(){return this.infoBlock?this.infoBlock:null}createElements(){this.addLink(),this.infoBlock.getElement().append(this.infoTitle.getElement(),this.infoText.getElement(),this.infoLink.getElement(),this.infoButton.getElement())}addLink(){this.infoLink.getElement().setAttribute("href","https://github.com/totoogg")}}},301:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=a(s(9979)),i=a(s(8595)),o=a(s(6273)),l=s(1700);s(8416),t.default=class{constructor(e){this.header=new i.default(l.headerParams),this.main=new r.default(l.mainInteractionParams),this.users=new r.default(l.interactionUsersParams),this.usersSearch=new r.default(l.usersSearchParams),this.usersBlock=new r.default(l.usersContentParams),this.massages=new o.default(l.interactionMessagesParams),this.footer=new n.default(l.footerParams),this.mainPage=new r.default(e),this.createElements()}getElement(){return this.mainPage?this.mainPage:null}createElements(){this.createInteraction(),this.createUsersBlock(),this.mainPage.getElement().append(this.header.mainHeader.getElement(),this.main.getElement(),this.footer.mainFooter.getElement())}createInteraction(){this.main.getElement().append(this.users.getElement(),this.massages.mainMessage.getElement())}createUsersBlock(){const e=this.usersSearch.getElement();e.setAttribute("type","text"),e.setAttribute("placeholder","Search..."),this.users.getElement().append(e,this.usersBlock.getElement())}}},9979:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(3486),t.default=class{constructor(e){this.link=new r.default(n.footerSchoolLinkParams),this.image=new r.default(n.footerSchoolLogoParams),this.name=new r.default(n.footerNameParams),this.year=new r.default(n.footerYearParams),this.mainFooter=new r.default(e),this.createElements()}getElement(){return this.mainFooter?this.mainFooter:null}createElements(){this.createLogo(),this.createLink(),this.mainFooter.getElement().append(this.link.getElement(),this.name.getElement(),this.year.getElement())}createLink(){this.name.getElement().setAttribute("href","https://github.com/totoogg")}createLogo(){const e=this.link.getElement(),t=this.image.getElement();e.setAttribute("href","https://rs.school/"),e.append(t)}}},8595:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(9062),t.default=class{constructor(e){this.user=new r.default(n.headerUserParams),this.name=new r.default(n.headerNameParams),this.buttons=new r.default(n.headerButtonsParams),this.logout=new r.default(n.headerLogoutParams),this.info=new r.default(n.buttonInfoParams),this.mainHeader=new r.default(e),this.createElements()}getElement(){return this.mainHeader?this.mainHeader:null}createElements(){this.createButtons(),this.mainHeader.getElement().append(this.user.getElement(),this.name.getElement(),this.buttons.getElement())}createButtons(){this.buttons.getElement().append(this.info.getElement(),this.logout.getElement())}}},6273:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(1120),t.default=class{constructor(e){this.header=new r.default(n.messagesHeaderParams),this.headerName=new r.default(n.messagesHeaderNameParams),this.headerStatus=new r.default(n.headerStatusParams),this.main=new r.default(n.messagesMainParams),this.footer=new r.default(n.messagesFooterParams),this.footerWrapper=new r.default(n.footerWrapperInputParams),this.wrapperInput=new r.default(n.wrapperInputParams),this.wrapperInputButton=new r.default(n.wrapperInputButtonParams),this.footerButton=new r.default(n.footerButtonParams),this.action=new r.default(n.actionParams),this.edit=new r.default(n.actionEditParams),this.delete=new r.default(n.actionDeleteParams),this.mainMessage=new r.default(e),this.createElements()}getElement(){return this.mainMessage?this.mainMessage:null}createElements(){this.createHeader(),this.createFooter(),this.createAction(),this.mainMessage.getElement().append(this.header.getElement(),this.main.getElement(),this.footer.getElement(),this.action.getElement())}createHeader(){this.header.getElement().append(this.headerName.getElement(),this.headerStatus.getElement())}createFooter(){const e=this.wrapperInput.getElement();e.setAttribute("type","text"),e.setAttribute("placeholder","Message..."),e.setAttribute("disabled","true");const t=this.wrapperInputButton.getElement();t.append(document.createElement("span"),document.createElement("span")),this.footerWrapper.getElement().append(e,t),this.footer.getElement().append(this.footerWrapper.getElement(),this.footerButton.getElement())}createAction(){this.action.getElement().append(this.edit.getElement(),this.delete.getElement())}}},1274:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(2331),t.default=class{constructor(e){this.left=new r.default(n.stripLeftParams),this.center=new r.default(n.stripCenterParams),this.right=new r.default(n.stripRightParams),this.strip=new r.default(e),this.createElements()}getElement(){return this.strip?this.strip:null}createElements(){this.strip.getElement().append(this.left.getElement(),this.center.getElement(),this.right.getElement())}}},4898:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(7275),t.default=class{constructor(e,t,s,a,i){this.header=new r.default(n.messageHeaderParams),this.sender=new r.default(n.messageHeaderSenderParams),this.time=new r.default(n.messageHeaderTimeParams),this.main=new r.default(n.messageMainParams),this.footer=new r.default(n.messageFooterParams),this.change=new r.default(n.messageFooterChangeParams),this.status=new r.default(n.messageFooterStatusParams),this.statusMessage=i,this.mailer=t,this.text=s,this.timeSend=a,this.message=new r.default(e),this.createElements()}getElement(){return this.message?this.message:null}createElements(){this.createHeader(),this.createFooter(),this.main.setText(this.text),this.message.getElement().append(this.header.getElement(),this.main.getElement(),this.footer.getElement())}createHeader(){this.sender.setText(this.mailer),this.time.setText(this.timeSend),this.header.getElement().append(this.sender.getElement(),this.time.getElement())}createFooter(){this.statusMessage.isEdited&&this.change.setText("changed"),"You"===this.mailer&&(this.statusMessage.isReaded?this.status.setText("readed"):this.statusMessage.isDelivered?this.status.setText("delivered"):this.status.setText("sent")),this.footer.getElement().append(this.change.getElement(),this.status.getElement())}}},1741:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(6756),t.default=class{constructor(e,t){this.status=new r.default(n.userAuthenticationStatusParams),this.name=new r.default(n.userAuthenticationNameParams),this.count=new r.default(n.userAuthenticationMessageParams),this.mainUsers=new r.default(e),this.userStatus=t.status,this.userName=t.name,this.userCount=t.count,this.createElements()}getElement(){return this.mainUsers?this.mainUsers:null}createElements(){this.createUser(),this.mainUsers.getElement().append(this.status.getElement(),this.name.getElement(),this.count.getElement())}createUser(){this.userStatus?this.status.setCssClasses(["online"]):this.status.setCssClasses(["offline"]),this.name.setText(this.userName),this.userCount>0&&(this.count.setText(String(this.userCount)),this.count.setCssClasses(["unread"]))}}},6700:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(8861),t.default=class{constructor(e){this.title=new r.default(n.notFoundTitleParams),this.text=new r.default(n.notFoundTextParams),this.notFoundPage=new r.default(e),this.createElements()}getElement(){return this.notFoundPage?this.notFoundPage:null}createElements(){this.notFoundPage.getElement().append(this.title.getElement(),this.text.getElement())}}},4908:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(8372)),n=s(1700);s(5981),t.default=class{constructor(e){this.title=new r.default(n.formTittleParams),this.blockName=new r.default(n.formNameParams),this.labelName=new r.default(n.nameLabelParams),this.inputName=new r.default(n.nameInputParams),this.errorName=new r.default(n.formNameErrorParams),this.blockPassword=new r.default(n.formPasswordParams),this.labelPassword=new r.default(n.passwordLabelParams),this.inputPassword=new r.default(n.passwordInputParams),this.errorPassword=new r.default(n.formPasswordErrorParams),this.buttonsBlock=new r.default(n.formButtonsParams),this.buttonLogin=new r.default(n.buttonLoginParams),this.buttonInfo=new r.default(n.buttonInfoParams),this.form=new r.default(e),this.createElements()}getElement(){return this.form?this.form:null}createElements(){this.createNameField(),this.createPasswordField(),this.createButtonsField(),this.form.getElement().append(this.title.getElement(),this.blockName.getElement(),this.errorName.getElement(),this.blockPassword.getElement(),this.errorPassword.getElement(),this.buttonsBlock.getElement())}createNameField(){this.labelName.getElement().setAttribute("for","name"),this.inputName.getElement().setAttribute("id","name"),this.inputName.getElement().setAttribute("required","true"),this.inputName.getElement().setAttribute("placeholder","Enter your name"),this.blockName.getElement().append(this.labelName.getElement(),this.inputName.getElement())}createPasswordField(){this.labelPassword.getElement().setAttribute("for","password"),this.inputPassword.getElement().setAttribute("id","password"),this.inputPassword.getElement().setAttribute("required","true"),this.inputPassword.getElement().setAttribute("type","password"),this.inputPassword.getElement().setAttribute("placeholder","Enter your password"),this.blockPassword.getElement().append(this.labelPassword.getElement(),this.inputPassword.getElement())}createButtonsField(){this.buttonsBlock.getElement().append(this.buttonLogin.getElement(),this.buttonInfo.getElement())}}},8372:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.param=e,this.element=null,this.createElement(e)}getElement(){return this.element?this.element:null}createElement(e){this.element=document.createElement(e.tag),this.setCssClasses(e.classNames),this.setText(e.textContent),this.setAction(e.action)}setCssClasses(e=[]){e.forEach((e=>{this.element&&this.element.classList.add(e)}))}setText(e=""){this.element&&(this.element.textContent=e)}setAction(e=null){Array.isArray(e)?e.forEach((e=>{e&&"function"==typeof e.callback&&this.element&&this.element.addEventListener(e.eventListener,(t=>e.callback(t)))})):e&&"function"==typeof e.callback&&this.element&&this.element.addEventListener(e.eventListener,(t=>e.callback(t)))}}},3537:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(1741)),n=s(1700);t.default=class{getNameValue(){return document.querySelector(".name__input").value}setNameValue(e){document.querySelector(".name__input").value=e}visibilityNameError(e){const t=document.querySelector(".name__input"),s=document.querySelector(".error-name");e?(t.classList.add("input-error"),s.classList.add("visibility")):(t.classList.remove("input-error"),s.classList.remove("visibility"))}getPasswordValue(){return document.querySelector(".password__input").value}setPasswordValue(e){document.querySelector(".password__input").value=e}checkButton(){return document.querySelector(".buttons__login").classList.contains("disable")}visibilityPasswordError(e){const t=document.querySelector(".password__input"),s=document.querySelector(".error-password");e?(t.classList.add("input-error"),s.classList.add("visibility")):(t.classList.remove("input-error"),s.classList.remove("visibility"))}checkVisibilityError(){const e=document.querySelector(".error-name"),t=document.querySelector(".error-password");return!(!e.classList.contains("visibility")&&!t.classList.contains("visibility"))}buttonLogin(e){const t=document.querySelector(".buttons__login");e||"on"!==localStorage.getItem("funChatTotooggJSFE2023Q4")||t.classList.remove("disable"),"string"==typeof e&&t.classList.add(e)}hiddenFormStart(){document.querySelector(".form").classList.add("display-none")}showError(e){const t=document.querySelector(".wrapper"),s=document.querySelector(".error");s.querySelector(".error__text").textContent=e,t.classList.remove("display-none"),s.classList.remove("display-none")}showErrorConnect(e){const t=document.querySelector(".wrapper"),s=document.querySelector(".error"),a=s.querySelector(".error__text"),r=s.querySelector(".error__button"),n=s.querySelector(".error__loss");e?(t.classList.remove("display-none"),s.classList.remove("display-none"),n.classList.remove("display-none"),a.classList.add("display-none"),r.classList.add("display-none")):(t.classList.add("display-none"),s.classList.add("display-none"),n.classList.add("display-none"),a.classList.remove("display-none"),r.classList.remove("display-none"))}hiddenError(){const e=document.querySelector(".wrapper"),t=document.querySelector(".error");e.classList.add("display-none"),t.classList.add("display-none")}showInfo(){const e=document.querySelector(".info"),t=document.querySelector("body");Array.from(t.children).forEach((e=>{e.classList.add("display-none")})),e.classList.remove("display-none")}setAttMain(){document.querySelector(".main").setAttribute("data-display","none")}hiddenInfo(){const e=document.querySelector(".info"),t=document.querySelector("body");Array.from(t.children).forEach((e=>{"none"===e.getAttribute("data-display")&&(e.classList.remove("display-none"),e.removeAttribute("data-display"))})),e.classList.add("display-none")}showMain(){const e=document.querySelector(".main"),t=document.querySelector(".name__input"),s=document.querySelector(".header__user");t.value.length>10?(s.setAttribute("data-login",t.value),s.setAttribute("title",t.value),s.textContent=`User: ${t.value.slice(0,10)}...`):(s.removeAttribute("data-login"),s.removeAttribute("title"),s.textContent=`User: ${t.value}`),e.classList.remove("display-none")}startPage(){const e=document.querySelector("body");Array.from(e.children).forEach((e=>{if(e.classList.contains("form")){const t=e.querySelector(".name__input"),s=e.querySelector(".password__input"),a=e.querySelector(".buttons__login");t.value="",s.value="",e.classList.remove("display-none"),a.classList.add("disable")}else e.classList.add("display-none")}))}addUser(e){const t=document.querySelector(".users__content"),s=new r.default(n.userAuthenticationParams,e).mainUsers.getElement();s.children[1].textContent.length>10&&(s.children[1].setAttribute("data-login",s.children[1].textContent),s.children[1].setAttribute("title",s.children[1].textContent),s.children[1].textContent=`${s.children[1].textContent.slice(0,10)}...`),t.append(s)}submitForm(){const e=document.querySelector(".form"),t=new Event("submit");e.dispatchEvent(t)}clickLogout(){const e=document.querySelector(".buttons__logout"),t=new Event("click");e.dispatchEvent(t)}clickInfo(){const e=document.querySelector(".buttons__info"),t=new Event("click");e.dispatchEvent(t)}checkInfo(){return document.querySelector(".info").classList.contains("display-none")}showNotFound(){const e=document.querySelector("body");Array.from(e.children).forEach((e=>{e.classList.contains("not-found")?e.classList.remove("display-none"):e.classList.add("display-none")}))}}},144:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(1274)),n=a(s(4898)),i=s(1700);t.default=class{activeButtonSendMessage(e){const t=document.querySelector(".footer__message-button");e?t.classList.remove("disable"):t.classList.add("disable")}clearUsers(){document.querySelector(".users__content").innerHTML=""}clearCountMessage(){const e=Array.from(document.querySelectorAll(".content__user")),t=this.getUserToSend(),s=e.find((e=>e.children[1].getAttribute("data-login")&&e.children[1].getAttribute("data-login")===t||e.children[1].textContent===t)),a=null==s?void 0:s.querySelector(".user__count-message");a.innerHTML="",a.classList.remove("unread")}clearInputMessage(){const e=document.querySelector(".wrapper__message-input");e.value="",e.removeAttribute("data-id")}getSearchUser(){return document.querySelector(".users__search").value}getUsers(){return Array.from(document.querySelectorAll(".user__name")).map((e=>e.getAttribute("data-login")||e.textContent))}showUsers(e){Array.from(document.querySelectorAll(".user__name")).forEach((t=>{const s=t.getAttribute("data-login");e.includes(s||t.textContent)?t.parentElement.classList.remove("display-none"):t.parentElement.classList.add("display-none")}))}checkUser(e){const t=Array.from(document.querySelectorAll(".content__user"));let s=!1;return t.forEach((t=>{const a=t.children[1],r=a.getAttribute("data-login");(r&&r===e||a.textContent===e)&&(s=!0)})),s}checkMessage(){return!!document.querySelector(".message")}updateStatusUser(e){Array.from(document.querySelectorAll(".content__user")).forEach((t=>{const s=t.children[1],a=s.getAttribute("data-login");(a&&a===e||s.textContent===e)&&(t.children[0].classList.add("online"),t.children[0].classList.remove("offline"))}))}sortUsers(){const e=document.querySelector(".users__content");Array.from(document.querySelectorAll(".content__user")).forEach((t=>{const s=t.cloneNode(!0);t.children[0].classList.contains("online")?e.prepend(s):e.append(s),t.remove()}))}changeUserStatusOffline(e){Array.from(document.querySelectorAll(".user__name")).forEach((t=>{const s=t.getAttribute("data-login");(s&&s===e||t.textContent===e)&&(t.previousElementSibling.classList.remove("online"),t.previousElementSibling.classList.add("offline"))}))}updateStatus(e){const t=document.querySelector(".header__status-user");e?(t.classList.remove("offline"),t.classList.add("online"),t.textContent="Online"):(t.classList.add("offline"),t.classList.remove("online"),t.textContent="Offline")}updateUserMessage(e,t){const s=document.querySelector(".header__name-user"),a=s.getAttribute("data-login");(a&&a===e||s.textContent===e)&&this.updateStatus(t)}selectUser(e,t,s){const a=document.querySelector(".messages__main"),r=document.querySelector(".header__name-user"),n=document.querySelector(".wrapper__message-input");r.textContent=t,a.classList.add("start"),n.removeAttribute("disabled"),a.textContent="Write your first message...",this.updateStatus(e),s?(r.setAttribute("data-login",s),r.setAttribute("title",s)):(r.removeAttribute("data-login"),r.removeAttribute("title"))}getMessageValue(){return document.querySelector(".wrapper__message-input").value}buttonSend(e){const t=document.querySelector(".footer__message-button");e?t.classList.remove("disable"):t.classList.add("disable")}checkButtonSend(){return document.querySelector(".footer__message-button").classList.contains("disable")}getUserToSend(){const e=document.querySelector(".header__name-user");return e.getAttribute("data-login")||e.textContent}getUserFromSend(){const e=document.querySelector(".header__user");return e.getAttribute("data-login")||e.textContent.slice(6)}checkCountMessages(){const e=Array.from(document.querySelectorAll(".message")),t=document.querySelector(".messages__main");0===e.length&&"Select a user to send a message..."!==t.textContent&&(t.classList.add("start"),t.textContent="Write your first message...")}checkIdMessages(e){return!!document.querySelector(`.message[data-id="${e}"]`)}updateCountMessages(e,t){Array.from(document.querySelectorAll(".content__user")).forEach((s=>{const a=s.children[1];if(a.getAttribute("data-login")===e||a.textContent===e){const e=s.lastElementChild;-1===t?(e.textContent="",null==e||e.classList.remove("unread")):(e.textContent=void 0===t?`${Number(e.textContent)+1}`:String(t),null==e||e.classList.add("unread"))}}))}addDividingStrip(){const e=document.querySelector(".messages__main"),t=new r.default(i.messageStripParams).strip.getElement();this.clearFieldMessages(),e.prepend(t)}checkDividingStrip(){return!!document.querySelector(".strip")}clearStrip(){const e=document.querySelector(".strip");this.checkDividingStrip()&&e.remove()}toggleAttMessages(e){const t=document.querySelector(".messages__main");e?t.setAttribute("data-scroll","true"):t.setAttribute("data-scroll","false")}checkAttMessages(){return document.querySelector(".messages__main").getAttribute("data-scroll")||"false"}updateMessageScrolling(){const e=document.querySelector(".messages__main");if(this.checkDividingStrip()){const t=document.querySelector(".strip"),s=Number(t.offsetTop)-2*Number(t.offsetHeight);e.scrollTop=s}else e.scrollTop=-1}addMessage(e,t,s,a,r){const o=document.querySelector(".messages__main"),l=new n.default(i.messagesParams,e,t,s,r).message.getElement(),u=l.querySelector(".header__message-sender");u.textContent.length>10?(u.setAttribute("data-login",e),u.setAttribute("title",e),u.textContent=`${e.slice(0,10)}...`):(u.removeAttribute("data-login"),u.removeAttribute("title"),u.textContent=e),"You"===e?l.classList.add("right"):l.classList.add("left"),l.setAttribute("data-id",a),this.clearFieldMessages(),o.prepend(l)}clearFieldMessages(){const e=document.querySelector(".messages__main");"Write your first message..."!==e.textContent&&"Select a user to send a message..."!==e.textContent||(e.textContent="",e.classList.remove("start"))}clearFieldMessagesLogout(){const e=document.querySelector(".messages__main");e.innerHTML="",e.textContent="Select a user to send a message...",e.classList.add("start")}clearInteractionMessages(){const e=document.querySelector(".header__name-user"),t=document.querySelector(".header__status-user"),s=document.querySelector(".wrapper__message-input");e.innerHTML="",t.innerHTML="",e.removeAttribute("data-login"),e.removeAttribute("title"),this.clearFieldMessagesLogout(),this.activeButtonSendMessage(!1),this.clearInputMessage(),s.setAttribute("disabled","true")}updateSentMessage(e,t){const s=Array.from(document.querySelectorAll(".message")).find((t=>t.getAttribute("data-id")===e)),a=null==s?void 0:s.querySelector(".footer__message-status");a&&t&&(null==s?void 0:s.classList.contains("right"))&&(a.textContent="delivered")}updateReadedMessage(e,t){const s=Array.from(document.querySelectorAll(".message")).find((t=>t.getAttribute("data-id")===e)),a=null==s?void 0:s.querySelector(".footer__message-status");a&&t&&(null==s?void 0:s.classList.contains("right"))&&(a.textContent="readed")}getIdMessagesDelivered(){const e=document.querySelector(".messages__main"),t=Array.from(e.children).findIndex((e=>"New message"===e.children[1].textContent));return Array.from(document.querySelectorAll(".message")).filter((e=>""===e.children[2].children[1].textContent)).slice(0,t).map((e=>e.getAttribute("data-id")))}overBlockActionMessage(e,t){const s=document.querySelector(".interaction__messages"),a=document.querySelector(".action");if(a.classList.contains("display-none")){const r=s.getBoundingClientRect().left,n=s.getBoundingClientRect().top,i=s.getBoundingClientRect().right,o=s.getBoundingClientRect().bottom,l=50,u=100;e<i-u&&t<o-l-45?a.style.transform=`translate(${e-r}px, ${t-n}px)`:t>o-l-45&&e>i-u?a.style.transform=`translate(${e-r-u}px, ${t-n-l}px)`:t<o-l&&e>i-u?a.style.transform=`translate(${e-r-u}px, ${t-n}px)`:t>o-l-45&&e<i-u&&(a.style.transform=`translate(${e-r-u}px, ${t-n-l}px)`)}}showActionMessage(e){const t=document.querySelector(".action");e?t.classList.remove("display-none"):(t.classList.add("display-none"),this.selectMessage("s"))}writeIdActionMessage(e){const t=document.querySelector(".action");e?t.setAttribute("data-id",e):t.removeAttribute("data-id")}getIdActionMessage(){return document.querySelector(".action").getAttribute("data-id")}selectMessage(e){Array.from(document.querySelectorAll(".message")).forEach((t=>{t.getAttribute("data-id")===e?t.classList.add("select"):t.classList.remove("select")}))}messageDelete(e){Array.from(document.querySelectorAll(".message")).forEach((t=>{t.getAttribute("data-id")===e&&t.remove()}))}addTextInInput(e){const t=document.querySelector(".wrapper__message-input"),s=Array.from(document.querySelectorAll(".message")).find((t=>t.getAttribute("data-id")===e));t.value=s.children[1].textContent,t.setAttribute("data-id",e),null==s||s.classList.add("edit"),this.showCancelEdit(!0),this.activeButtonSendMessage(!0)}clearMessageEdit(){const e=Array.from(document.querySelectorAll(".message")).find((e=>e.classList.contains("edit")));null==e||e.classList.remove("edit")}showCancelEdit(e){const t=document.querySelector(".wrapper__button");e?t.classList.remove("display-none"):t.classList.add("display-none")}getIdInput(){return document.querySelector(".wrapper__message-input").getAttribute("data-id")}checkEdit(){return document.querySelector(".wrapper__button").classList.contains("display-none")}messageEdit(e,t){const s=Array.from(document.querySelectorAll(".message")).find((t=>t.getAttribute("data-id")===e)),a=null==s?void 0:s.querySelector(".footer__message-change");s.children[1].textContent=t,a.textContent="changed"}selectUserClick(e){const t=Array.from(document.querySelectorAll(".user__name")).find((t=>t.textContent===e)),s=new Event("click");t.dispatchEvent(s)}}},1700:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.messageHeaderParams=t.messagesParams=t.stripRightParams=t.stripCenterParams=t.stripLeftParams=t.messageStripParams=t.messagesMainParams=t.headerStatusParams=t.messagesHeaderNameParams=t.messagesHeaderParams=t.interactionMessagesParams=t.userAuthenticationMessageParams=t.userAuthenticationNameParams=t.userAuthenticationStatusParams=t.userAuthenticationParams=t.usersContentParams=t.usersSearchParams=t.interactionUsersParams=t.mainInteractionParams=t.mainParams=t.headerLogoutParams=t.headerButtonsParams=t.headerNameParams=t.headerUserParams=t.headerParams=t.infoButtonParams=t.infoLinkParams=t.infoTextParams=t.infoTitleParams=t.infoParams=t.errorButtonParams=t.errorTextParams=t.errorLossTextParams=t.errorLossImgParams=t.errorLossParams=t.errorParams=t.wrapperParams=t.buttonInfoParams=t.buttonLoginParams=t.formButtonsParams=t.formPasswordErrorParams=t.passwordInputParams=t.passwordLabelParams=t.formPasswordParams=t.formNameErrorParams=t.nameInputParams=t.nameLabelParams=t.formNameParams=t.formTittleParams=t.formParams=void 0,t.notFoundTextParams=t.notFoundTitleParams=t.notFoundParams=t.footerYearParams=t.footerNameParams=t.footerSchoolLogoParams=t.footerSchoolLinkParams=t.footerParams=t.footerButtonParams=t.wrapperInputButtonParams=t.wrapperInputParams=t.footerWrapperInputParams=t.messagesFooterParams=t.actionDeleteParams=t.actionEditParams=t.actionParams=t.messageFooterStatusParams=t.messageFooterChangeParams=t.messageFooterParams=t.messageMainParams=t.messageHeaderTimeParams=t.messageHeaderSenderParams=void 0;const r=a(s(4987)),n=a(s(8702)),i=a(s(5315)),o=a(s(4401)),l=a(s(7348)),u=a(s(3082)),d=a(s(4701)),c=a(s(8922)),m=a(s(5889)),h=a(s(1132)),g=a(s(1619)),f=a(s(948)),p=a(s(8918)),_=a(s(2187)),S=a(s(4754)),v=a(s(3315));t.formParams={tag:"form",classNames:["form"],action:new g.default("submit")},t.formTittleParams={tag:"h1",classNames:["form__title"],textContent:"Fun Chat"},t.formNameParams={tag:"div",classNames:["form__name"]},t.nameLabelParams={tag:"label",classNames:["name__label"],textContent:"Name"},t.nameInputParams={tag:"input",classNames:["name__input"],action:new h.default("keyup")},t.formNameErrorParams={tag:"div",classNames:["form__error","error-name"],textContent:"The name field requires at least 4 characters of the English alphabet or numbers, without gaps"},t.formPasswordParams={tag:"div",classNames:["form__password"]},t.passwordLabelParams={tag:"label",classNames:["password__label"],textContent:"Password"},t.passwordInputParams={tag:"input",classNames:["password__input"],action:new h.default("keyup")},t.formPasswordErrorParams={tag:"div",classNames:["form__error","error-password"],textContent:"Length must be more than 4 characters. Use uppercase and lowercase letters English alphabet or numbers, without gaps"},t.formButtonsParams={tag:"div",classNames:["form__buttons"]},t.buttonLoginParams={tag:"button",classNames:["buttons__login","button","disable"],textContent:"Login"},t.buttonInfoParams={tag:"button",classNames:["buttons__info","button"],textContent:"Info",action:new m.default("click")},t.wrapperParams={tag:"div",classNames:["wrapper","display-none"]},t.errorParams={tag:"div",classNames:["error","display-none"]},t.errorLossParams={tag:"div",classNames:["error__loss","display-none"]},t.errorLossImgParams={tag:"div",classNames:["loss__img"]},t.errorLossTextParams={tag:"p",classNames:["loss__text"],textContent:"Connection to the server"},t.errorTextParams={tag:"p",classNames:["error__text"]},t.errorButtonParams={tag:"button",classNames:["error__button","button"],textContent:"Ok",action:new r.default("click")},t.infoParams={tag:"div",classNames:["info","display-none"]},t.infoTitleParams={tag:"h2",classNames:["info__title"],textContent:"Fun Chat"},t.infoTextParams={tag:"p",classNames:["info__text"],textContent:"What could be better than chatting with friends using a chat app? On your own server."},t.infoLinkParams={tag:"a",classNames:["info__link"],textContent:"Author Vladimir Goncharov"},t.infoButtonParams={tag:"button",classNames:["info__button","button"],textContent:"Come back",action:new n.default("click")},t.headerParams={tag:"div",classNames:["main__header"]},t.headerUserParams={tag:"p",classNames:["header__user"],textContent:"User: "},t.headerNameParams={tag:"h2",classNames:["header__name"],textContent:"Fun Chat"},t.headerButtonsParams={tag:"div",classNames:["header__buttons"]},t.headerLogoutParams={tag:"button",classNames:["buttons__logout","button"],textContent:"Logout",action:new i.default("click")},t.mainParams={tag:"div",classNames:["main","display-none"]},t.mainInteractionParams={tag:"div",classNames:["main__interaction"]},t.interactionUsersParams={tag:"div",classNames:["interaction__users"]},t.usersSearchParams={tag:"input",classNames:["users__search"],action:new c.default("keyup")},t.usersContentParams={tag:"div",classNames:["users__content"],action:new d.default("click")},t.userAuthenticationParams={tag:"div",classNames:["content__user"]},t.userAuthenticationStatusParams={tag:"div",classNames:["user__status"]},t.userAuthenticationNameParams={tag:"p",classNames:["user__name"]},t.userAuthenticationMessageParams={tag:"div",classNames:["user__count-message"]},t.interactionMessagesParams={tag:"div",classNames:["interaction__messages"]},t.messagesHeaderParams={tag:"div",classNames:["messages__header"]},t.messagesHeaderNameParams={tag:"p",classNames:["header__name-user"]},t.headerStatusParams={tag:"p",classNames:["header__status-user","offline"]},t.messagesMainParams={tag:"div",classNames:["messages__main","start"],textContent:"Select a user to send a message...",action:[new l.default("wheel"),new l.default("mousedown"),new p.default("mousedown"),new f.default("mouseenter"),new f.default("mouseleave"),new f.default("mousemove"),new p.default("contextmenu")]},t.messageStripParams={tag:"div",classNames:["strip"]},t.stripLeftParams={tag:"div",classNames:["strip__left"]},t.stripCenterParams={tag:"p",classNames:["strip__center"],textContent:"New message"},t.stripRightParams={tag:"div",classNames:["strip__right"]},t.messagesParams={tag:"div",classNames:["message"]},t.messageHeaderParams={tag:"div",classNames:["message__header"]},t.messageHeaderSenderParams={tag:"p",classNames:["header__message-sender"]},t.messageHeaderTimeParams={tag:"p",classNames:["message__message-time"]},t.messageMainParams={tag:"p",classNames:["message__main"]},t.messageFooterParams={tag:"div",classNames:["message__footer"]},t.messageFooterChangeParams={tag:"p",classNames:["footer__message-change"]},t.messageFooterStatusParams={tag:"p",classNames:["footer__message-status"]},t.actionParams={tag:"div",classNames:["action","display-none"]},t.actionEditParams={tag:"div",classNames:["action__edit"],textContent:"Edit",action:new S.default("click")},t.actionDeleteParams={tag:"div",classNames:["action__delete"],textContent:"Delete",action:new _.default("click")},t.messagesFooterParams={tag:"form",classNames:["messages__footer"],action:new u.default("submit")},t.footerWrapperInputParams={tag:"div",classNames:["footer__wrapper"]},t.wrapperInputParams={tag:"input",classNames:["wrapper__message-input"],action:new o.default("keyup")},t.wrapperInputButtonParams={tag:"div",classNames:["wrapper__button","display-none"],action:new v.default("click")},t.footerButtonParams={tag:"button",classNames:["footer__message-button","button","disable"],textContent:"Send"},t.footerParams={tag:"div",classNames:["main__footer"]},t.footerSchoolLinkParams={tag:"a",classNames:["footer__school-link"]},t.footerSchoolLogoParams={tag:"div",classNames:["school-link__logo"]},t.footerNameParams={tag:"a",classNames:["footer__author"],textContent:"Vladimir Goncharov"},t.footerYearParams={tag:"p",classNames:["footer__year"],textContent:"2024"},t.notFoundParams={tag:"div",classNames:["not-found","display-none"]},t.notFoundTitleParams={tag:"p",classNames:["not-found__title"],textContent:"An error has occurred"},t.notFoundTextParams={tag:"p",classNames:["not-found__text"],textContent:"The page you requested does not exist"}},8156:function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(s(5977));s(400),(new r.default).createPage()}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s(8156)})();